<!DOCTYPE html>
<html>
	<head>
		<title>Fantasy Civics</title>
		<!--<link rel="icon" type="img/png" href="style/favicon.png" style="width:30px;">-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://www.gstatic.com/firebasejs/3.6.6/firebase.js"></script>
		<script>
			// Initialize Firebase
		</script>
		<style>



		</style>
	</head>

	<body>

		<h1>Database Testing Suite</h1>

		<script type="text/javascript" src="../assets/promise.min.js"></script>
		<script type="text/javascript" src="../assets/jquery-3.1.1.min.js"></script>
		<script type="text/javascript" src="../lib/util.js"></script>
		<script type="text/javascript" src="./player.js"></script>
		<script type="text/javascript" src="./league.js"></script>
		<script type="text/javascript" src="./scoring.js"></script>
		
		<script type="text/javascript">


			var testUsers = {
				'userid0001': {
					name: 'Derek Eder'
				},
				'userid0002': {
					name: 'Nina Sandlin'
				},
				'userid0003': {
					name: 'Karl Fogel'
				}
			}

			var testLeague = {
				id: 'leagueid0008',
				name: 'ChiHackNight',
				start: 1487138400000,
				end: 1489554000000,
				users: Object.keys(testUsers),
				bots: BOT_MAP,
				players: PLAYER_MAP
			}

			var users = League.fixUserList(testLeague.users, BOT_MAP);

			// Test Generate Schedule
			console.log('Test Generate Schedule');
			var schedule = League.generateSchedule(users);
			console.log(schedule);

			// Test Generate Rosters
			console.log('Test Generate Rosters');
			var rosters = League.generateRosters(users, PLAYER_MAP);
			console.log(rosters);

			// Test Generate League
			console.log('Test Generate League');
			var league = League.generateLeague(testLeague);
			console.log(league);

			// Test Scoring Requests
			var from = new Date('2/14/2017').getTime();
			var to = new Date().getTime();
			Scoring.queryDataset('pot_holes', {
				'$where': Scoring.buildDateQuery('creation_date', from, to),
				'ward': 2
			}).then((data) => {
				console.log('Test Scoring Requests');
				console.log(data.length, data);
			}).catch((err) => {
				console.log('Test Scoring Requests');
				console.log(err);
			});


		</script>
	
	</body>

</html>